<!DOCTYPE html>
<html lang="en"> <!-- main language (to avoid HTML validator) -->
<head>
	<meta charset="UTF-8" />
	<title>twitterdb schema</title>
	<style type="text/css">
/* -------------------------------------------------
                                             Core
------------------------------------------------- */
* {
	margin: 0;
	padding: 0;
}
body {
	font-family: Verdana, "Hiragino Kaku Gothic Pro", "ヒラギノ角ゴ Pro W3", Meiryo, "メイリオ", "MS P Gothic", "MS Pゴシック", sans-serif;
	font-size: 80%;
	margin: 10px 5px 5px 15px;
	background-color: #ffffe0;
}

/* -------------------------------------------------
                                        Structure
------------------------------------------------- */
h1 {
	font-size: 1.5em;
	border-bottom: 2px solid #af0000;
	border-top: 2px solid #af0000;
}
h2 {
	margin: 30px 0 5px 0;
	font-size: 1.8em;
	border-bottom: 2px solid #af0000;
	border-left: 10px solid #af0000;
	text-indent: 10px;
}
h3 {
	padding: 0 0 0 10px;
	margin: 1em 10% 0 0;
	border-top: double 3px #af0000;
	border-bottom: solid 1px #333333;
	font-size: 1.5em;
	color: #333333;
}
h4 {
	padding: 0 0 0 10px;
	margin: 1em 10% 0 1em;
	border-top: none;
	border-bottom: solid 1px #663333;
	font-size: 1.3em;
	color: #333333;
}

/* -------------------------------------------------
                                     Whole Header
------------------------------------------------- */
.updatedate {
	text-align: right;
}
.mainschema {
	text-align: right;
}
.navilinkarea {
	text-align: right;
}
.sublink {
	margin-top: 0.1em;
}
.sisterlink {
	margin-top: 0.6em;
	font-size: 120%;
}
.sistersublink {
	margin-top: 0.6em;
	font-size: 85%;
}
.sisterneighborlink {
	margin-top: 0.6em;
	font-size: 100%;
}

/* -------------------------------------------------
                                   Keyword Search
------------------------------------------------- */
.keywordsearch {
	padding: 0.7em 0 0.7em 0;
}
.searchmemo {
	font-size: 0.9em;
	color: #114488;
}
.suggestionarea {
	padding: 0 0.2em 0.2em 0.2em;
	margin: 0;
	position: absolute;
	zindex: 100;
	background-color: #DDFFDD;
	border-width: 1px;
	border-style: solid;
	border-color: #CCCCCC;
	list-style-type: none;
}

/* -------------------------------------------------
                                   Database Table
------------------------------------------------- */
table {
	border-collapse:collapse;
}
table, th {
	border: 1px solid #555;
}
th {
	background-color: #cc9;
	font-size: 0.8em;
}
td {
	border-bottom: 1px dotted #aaa;
	border-left: 1px solid #555;
	padding:2px;
}
.tablecomment {
	font-size: 0.8em;
	color: #3F7E5E;
	padding:0 0 0.2em 1em;
}
.rownumhead {
	text-align: center;
	font-size: 0.4em;
}
.rownumcell {
	text-align: center;
	font-size: 0.4em;
	color: #444;
}
.schemacell {
	font-size: 0.8em;
	white-space: nowrap;
}
.aliascell {
	white-space: nowrap;
}
.flgcell {
	text-align: center;
}
.flgplus {
	font-size: 0.7em;
}
.typecell {
	font-size: 0.6em;
}
.sizecell {
	text-align: center;
	font-size: 0.8em;
}
.defvalcell {
	text-align: center;
	font-size: 0.6em;
}
.relcell {
	font-size: 0.7em;
}
.commentcell {
	font-size: 0.7em;
	color: #3F7E5E;
}
.commentcellerror {
	color: red;
}
.subcell {
	font-size: 0.6em;
}
.comcolcell {
	color: #666;
}
.optcell {
	font-style: italic;
}
.additionalpk {
	font-style: italic;
}
.additionalfk {
	font-style: italic;
}
.clstypecell {
	text-align: center;
	font-size: 0.8em;
}
.commentdesc {
	color: #3F7E5E;
}

/* inner table */
table.child {
	margin: 3px;
}
table.child th {
	font-size: 0.7em;
}
table.child, table.child td, table.child th {
	border-top: none;
	border-left: none;
	border-bottom: 1px solid #aaa;
	border-right: 1px solid #aaa;
}
.clsgroup {
	font-size: 1.2em;
	padding-left: 4px;
	padding-right: 4px;
}

/* table supplementary info */
span.tableschematitle {
	font-size: 0.5em;
	color: #888888;
}
span.tablefirstdatetitle {
	font-size: 0.5em;
	color: #888888;
}

/* -------------------------------------------------
                                    Arrange Query
------------------------------------------------- */
span.arrqycount {
	font-size: 0.5em;
}
dl.arrqylist {
	margin-top: 0.7em;
	padding-left: 3em;
}
dl.arrqylist dt {
	display: list-item;
	list-style-type: circle;
	font-size: 1.3em;
	margin-top: 0.3em;
}
dl.arrqylist dd {
	padding-left: 1em;
}
dl.arrqylist dd pre {
	font-size: 1.1em;
}
dl.arrqylist dd.subinfo {
	padding-left: 2em;
}
dl.arrqylist dd.subinfo span.sqlap {
	font-style: italic;
	color: #002266;
}
dl.arrqylist dd.subinfo span.file {
	font-style: italic;
	color: #002266;
}
dl.arrqylist dd.subinfo span.ctet {
	color: green;
}
dl.arrqylist dd.subinfo span.pmb {
	color: green;
}

/* -------------------------------------------------
                             Behavior Query Path
------------------------------------------------- */
span.bqpcount {
	font-size: 0.5em;
}
dl.bqplist {
	padding-left: 2em;
}
dl.bqplist dt {
	display: list-item;
	font-size: 1.3em;
	margin-top: 0.3em;
}
dl.bqplist dd {
	padding-left: 1em;
}
dl.bqplist dd pre {
	font-size: 1.1em;
}
dl.bqplist dd.subinfo {
	padding-left: 2em;
}
dl.bqplist dd.subinfo span.sqlap {
	font-style: italic;
	color: #002266;
}
dl.bqplist dd.subinfo span.file {
	font-style: italic;
	color: #002266;
}
dl.bqplist dd.subinfo span.ctet {
	color: green;
}
dl.bqplist dd.subinfo span.pmb {
	color: green;
}

/* -------------------------------------------------
                                 Stored Procedure
------------------------------------------------- */
dl.procedurelist {
	padding-left: 2em;
}
dl.procedurelist dt {
	display: list-item;
	font-size: 1.3em;
	margin-top: 0.3em;
}
dl.procedurelist dt span.type {
	font-size: 0.7em;
	color: green;
}
dl.procedurelist dd {
	padding-left: 1em;
}
dl.procedurelist dd pre {
	font-size: 1.1em;
}
dl.procedurelist dd.column {
	font-style: italic;
	padding-left: 2em;
}
dl.procedurelist dd.column span.attrs {
	font-size: 0.7em;
	color: #125699;
}
dl.procedurelist dd.column span.type {
	font-size: 0.9em;
	color: green;
}
dl.procedurelist dd.column pre {
	padding-left: 1em;
}

/* -------------------------------------------------
                                    Schema Policy
------------------------------------------------- */
pre.spolicydisp {
	padding-top: 0.5em;
	padding-left: 0.5em;
}
pre.spolicyviodisp {
	padding-top: 0.5em;
	padding-left: 0.5em;
	color: #994747;
}

/* -------------------------------------------------
                                  Decomment Modal
------------------------------------------------- */
.decommentmodal {
	display: none;
	position: fixed;
	z-index: 5;
	height: 100%;
	width: 100%;
	top: 0;
	left: 0;
	padding-top: 50px;
	background-color: rgba(0, 0, 0, 0.5);
}
.decommentmodalcontent {
	position: relative;
	z-index: 10;
	width: 50%;
	margin: 0 auto;
	border: 1px solid #999999;
	padding: 15px;
	background-color: #fff8f8;
	border-radius: 4px;
}
.decommentmodalcontent p {
	font-size: 14px;
	color: #222277;
}
.decommentinput {
	display: block;
	width: 100%;
	margin-top: 10px;
	font-size: 12px;
}
.decommentmodal-ok-area {
	text-align: right;
	margin: 0em 1em 0em 0em
}
.decommentmodal-ok-btn {
	display: inline-block;
	margin: 0.5em 0em;
	padding: 0.5em 1.5em 0.5em 1.5em;
	text-decoration: none;
	border-radius: 3px;
	font-weight: bold;
	color: #FFF;
	text-align: right;
	background-image: -webkit-linear-gradient(45deg, #709dff 0%, #b0c9ff 100%);
	background-image: linear-gradient(45deg, #709dff 0%, #b0c9ff 100%);
	transition: .4s;
}
.decommentmodal-ok-btn:hover{
	background-image: -webkit-linear-gradient(45deg, #709dff 50%, #b0c9ff 100%);
	background-image: linear-gradient(45deg, #709dff 50%, #b0c9ff 100%);
}
.decommentmodal-close-btn {
	position: absolute;
	margin-left: 10px;
	padding: 0;
	right: 10px;
	top: 5px;
	cursor: pointer;
	width: 28px;
	height: 28px;
	border: 0;
	border-radius: 50%;
	color: #657786;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	transition: box-shadow .15s ease-in-out;
}
.decommentmodal-close-btn:hover {
	background-color: #eed;
}
.decomment-user-input {
	display: none;
}
.decomment-user-name {
	margin-top: 0.5em;
	padding: 5px;
	border: thin solid #aa3344;
}
.decomment-user-name-desc {
	margin-left: 0.5em;
	color: #222277;
}
	</style>
</head>

<body>
<h1>Schema for twitterdb (mysql)</h1>
<p class="mainschema">generated from <strong>twitterdb</strong></p>
<div class="navilinkarea">
<p class="sisterlink"><a href="./history-twitterdb.html">to HistoryHTML</a></p>
</div>

<div style="display:none" id="unmapped-tables">
	<h2>Decomment Unmapped Tables</h2>
	<table>
		<thead id="unmapped-table-head">
		<tr>
			<th>No</th>
			<th>Table Name</th>
			<th class="conflictcell">Conflict Mapping Name</th>
			<th>Mapping</th>
		</tr>
		</thead>
		<tbody id="unmapped-table-body">
		<!--tr>
			<td class="rownumcell">1</td>
			<td class="namecell">NEW_TABLE_NAME</td>
			<td class="tableselectorcell">
			</td>
		</tr-->
		</tbody>
	</table>
	<button id="table-mapping-submit-button">Mapping</button>
</div>

<div style="display:none" id="unmapped-columns">
	<h2>Decomment Unmapped Columns</h2>
	<ul id="unmapped-column-list">
	</ul>
	<table>
		<thead id="unmapped-column-head">
		<tr>
			<th>No</th>
			<th>Table Name</th>
			<th>Column Name</th>
			<th class="conflictcell">Conflict Mapping Name</th>
			<th>Mapping</th>
		</tr>
		</thead>
		<tbody id="unmapped-column-body">
		<!--tr>
			<td class="rownumcell">1</td>
			<td class="namecell">NEW_TABLE_NAME</td>
			<td class="namecell">NEW_COLUMN_NAME</td>
			<td class="columnselectorcell">
			</td>
		</tr-->
		</tbody>
	</table>
	<button id="column-mapping-submit-button">Mapping</button>
</div>

<h2 id="schemapolicyvio">SchemaPolicy Violation</h2>
<pre class="spolicyviodisp">
Look! Read the message below.
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
The schema policy has been violated.

[Advice]
Make sure your violating schema (ERD and DDL).
You can see violations on this message or SchemaHTML.
And after that, execute renewal (or regenerate) again.
(tips: The schema policy is on schemaPolicyMap.dfprop)

[Violation]
whole.theme: sameColumnAliasIfSameColumnName
 +-The column alias should be same if column name is same: USER_ACCOUNTS.USER_ID=ユーザID, USER_FOLLOWS.USER_ID=被フォローユーザID

whole.theme: sameColumnDbTypeIfSameColumnName
 +-The column db-type should be same if column name is same: ACCOUNTS.ID=BIGINT UNSIGNED, TWEET_IMAGES.ID=BIGINT

whole.theme: sameColumnSizeIfSameColumnName
 +-The column size should be same if column name is same: ACCOUNTS.ID=20, TWEET_IMAGES.ID=19

column.statement: if columnName is suffix:_ID then dbType is bigint or int
 |-but VARCHAR: (アカウントテーブル.ディスプレイID)ACCOUNTS.DISPLAY_ID VARCHAR(255) (NotNull) // @の後に続くアカウン...
 |-but BIGINT UNSIGNED: (TWEET_IMAGES)TWEET_IMAGES.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // 画像が紐づくツイート...
 |-but BIGINT UNSIGNED: (NEW_TABLE)TWEET_LIKES.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // いいねされたツイート...
 |-but BIGINT UNSIGNED: (NEW_TABLE.ユーザID)TWEET_LIKES.LIKED_USER_ID BIGINT UNSIGNED(20) (NotNull) // ツイートにいいねした...
 |-but BIGINT UNSIGNED: (TWEET_REPLIES.ユーザID)TWEET_REPLIES.REPLY_USER_ID BIGINT UNSIGNED(20) (NotNull) // ツイートに返信したユ...
 |-but INT UNSIGNED: (TWEET_REPLIES)TWEET_REPLIES.REPLY_PARENT_ID INT UNSIGNED(10) (NotNull) // 返信したツイートのi...
 |-but BIGINT UNSIGNED: (ユーザとアカウント関連テーブル.ユーザID)USER_ACCOUNTS.USER_ID BIGINT UNSIGNED(20) (NotNull) // アカウントを所有して...
 |-but BIGINT UNSIGNED: (ユーザとアカウント関連テーブル.所持アカウントID)USER_ACCOUNTS.ACCOUNT_ID BIGINT UNSIGNED(20) (NotNull) // ユーザの所有している...
 |-but BIGINT UNSIGNED: (フォロー関係テーブル.被フォローユーザID)USER_FOLLOWS.USER_ID BIGINT UNSIGNED(20) (NotNull) // フォローしたユーザの...
 |-but BIGINT UNSIGNED: (フォロー関係テーブル.フォローユーザID)USER_FOLLOWS.FOLLOWING_USER_ID BIGINT UNSIGNED(20) (NotNull) // フォローされたユーザ...
 |-but BIGINT UNSIGNED: (USER_RETWEETS.ユーザID)USER_RETWEETS.USER_ID BIGINT UNSIGNED(20) (NotNull) // リツイートしたユーザ...
 |-but BIGINT UNSIGNED: (USER_RETWEETS)USER_RETWEETS.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // リツイートしたtwe...
 |-but BIGINT UNSIGNED: (USER_TWEETS.ユーザID)USER_TWEETS.USER_ID BIGINT UNSIGNED(20) (NotNull) // ツイートしたユーザの...
 +-but BIGINT UNSIGNED: (USER_TWEETS)USER_TWEETS.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // ユーザがツイートした...

column.theme: hasAlias
 |-The column should have column alias: (TWIEETS)TWEETS.ID BIGINT UNSIGNED(20) (NotNull)
 |-The column should have column alias: (TWIEETS)TWEETS.BODY TEXT(65535) (NotNull) // ツイートの文章
 |-The column should have column alias: (TWIEETS)TWEETS.DEVICE_TYPE INT UNSIGNED(10) (NotNull) // ツイートしたデバイス...
 |-The column should have column alias: (TWEET_IMAGES)TWEET_IMAGES.ID BIGINT(19) (NotNull)
 |-The column should have column alias: (TWEET_IMAGES)TWEET_IMAGES.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // 画像が紐づくツイート...
 |-The column should have column alias: (TWEET_IMAGES)TWEET_IMAGES.IMAGE_PATH TEXT(65535) (NotNull) // ツイートに紐づく画像...
 |-The column should have column alias: (TWEET_IMAGES)TWEET_IMAGES.SEQ INT(10) (NotNull) // ツイートに載せる画像...
 |-The column should have column alias: (NEW_TABLE)TWEET_LIKES.ID BIGINT UNSIGNED(20) (NotNull)
 |-The column should have column alias: (NEW_TABLE)TWEET_LIKES.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // いいねされたツイート...
 |-The column should have column alias: (TWEET_REPLIES)TWEET_REPLIES.ID BIGINT UNSIGNED(20) (NotNull)
 |-The column should have column alias: (TWEET_REPLIES)TWEET_REPLIES.SEQ INT UNSIGNED(10) (NotNull) // 返信の順番
 |-The column should have column alias: (TWEET_REPLIES)TWEET_REPLIES.REPLY_PARENT_ID INT UNSIGNED(10) (NotNull) // 返信したツイートのi...
 |-The column should have column alias: (TWEET_REPLIES)TWEET_REPLIES.TYPE INT UNSIGNED(10) (NotNull) // 返信したスレッドのタ...
 |-The column should have column alias: (TWEET_REPLIES)TWEET_REPLIES.CREATED_AT DATETIME(19) (NotNull)
 |-The column should have column alias: (TWEET_REPLIES)TWEET_REPLIES.UPDATED_AT DATETIME(19) (NotNull)
 |-The column should have column alias: (USER_RETWEETS)USER_RETWEETS.ID BIGINT UNSIGNED(20) (NotNull) // ユーザのid
 |-The column should have column alias: (USER_RETWEETS)USER_RETWEETS.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // リツイートしたtwe...
 |-The column should have column alias: (USER_RETWEETS)USER_RETWEETS.BODY TEXT(65535) (NullAllowed) // リツイートする際の文...
 |-The column should have column alias: (USER_TWEETS)USER_TWEETS.ID BIGINT UNSIGNED(20) (NotNull)
 |-The column should have column alias: (USER_TWEETS)USER_TWEETS.TWEET_ID BIGINT UNSIGNED(20) (NotNull) // ユーザがツイートした...
 |-The column should have column alias: (USER_TWEETS)USER_TWEETS.UPDATED_AT DATETIME(19) (NotNull)
 +-The column should have column alias: (USER_TWEETS)USER_TWEETS.CREATED_AT DATETIME(19) (NotNull)

table.theme: hasCommonColumn
 +-The table should have common columns: (ユーザとアカウント関連テーブル)USER_ACCOUNTS // ユーザとアカウントの...

table.statement: if tableName is $$ALL$$ then fkName is prefix:FK_$$table$$
 +-but FK_USER_RETWEET_TWIEETS: (USER_RETWEETS)USER_RETWEETS // ユーザがどのツイート...

table.statement: if tableName is $$ALL$$ then indexName is prefix:IX_$$table$$ or prefix:FK_$$table$$
 +-but FK_USER_RETWEET_TWIEETS: (USER_RETWEETS)USER_RETWEETS // ユーザがどのツイート...

table.statement: if tableName is $$ALL$$ then uniqueName is prefix:UQ_$$table$$
 +-but UQ_USER_RETWEET_USER_ID_RETWEET_ID: (USER_RETWEETS)USER_RETWEETS // ユーザがどのツイート...
* * * * * * * * * */
</pre>

<h2>Table List</h2>
<div class="keywordsearch">
	<input type="text" id="incremental-search-field" tabindex=1 value="" placeholder="Table Search" />
	<ul id="suggestion-list" class="suggestionarea"></ul>
	<span class="searchmemo">*Push 'tab' (primary tab order)</span>
</div>
<table>
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>TableComment</th>
		<th>EntityName</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="table-list-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="aliascell">アカウントテーブル</td>
		<td class="namecell" data-name="ACCOUNTS"><a href="#accounts" title="type=TABLE, primaryKey={ID}, nameLength=8, columnCount=8">ACCOUNTS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"><a href="#user_accounts" title="FK_USER_ACCOUNTS_ACCOUNTS">USER_ACCOUNTS</a></td>
		<td class="commentcell ACCOUNTS_comment"><pre>アカウントを管理するテーブル</pre></td>
		<td class="subcell">Accounts</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="aliascell">TWIEETS</td>
		<td class="namecell" data-name="TWEETS"><a href="#tweets" title="type=TABLE, primaryKey={ID}, nameLength=6, columnCount=5">TWEETS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"><a href="#tweet_images" title="FK_TWEET_IMAGES_TWIEETS">TWEET_IMAGES</a>, <a href="#tweet_likes" title="FK_TWEET_LIKES_TWIEETS">TWEET_LIKES</a>, <a href="#user_retweets" title="FK_USER_RETWEET_TWIEETS">USER_RETWEETS</a>, <a href="#user_tweets" title="FK_USER_TWEETS_TWIEETS">USER_TWEETS</a></td>
		<td class="commentcell TWEETS_comment"><pre>ツイートを管理するテーブル</pre></td>
		<td class="subcell">Tweets</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="aliascell">TWEET_IMAGES</td>
		<td class="namecell" data-name="TWEET_IMAGES"><a href="#tweet_images" title="type=TABLE, primaryKey={ID}, nameLength=12, columnCount=6">TWEET_IMAGES</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#tweets" title="FK_TWEET_IMAGES_TWIEETS">TWEETS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell TWEET_IMAGES_comment"><pre>ツイートに対して投稿された画像のパスを紐づけるテーブル
seqでシーケンス番号(順番)を管理している</pre></td>
		<td class="subcell">TweetImages</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="aliascell">NEW_TABLE</td>
		<td class="namecell" data-name="TWEET_LIKES"><a href="#tweet_likes" title="type=TABLE, primaryKey={ID}, nameLength=11, columnCount=5">TWEET_LIKES</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#users" title="FK_TWEET_LIKES_USERS">USERS</a>, <a href="#tweets" title="FK_TWEET_LIKES_TWIEETS">TWEETS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell TWEET_LIKES_comment"><pre>ユーザがどのツイートにいいねしたかを管理するテーブル</pre></td>
		<td class="subcell">TweetLikes</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="aliascell">TWEET_REPLIES</td>
		<td class="namecell" data-name="TWEET_REPLIES"><a href="#tweet_replies" title="type=TABLE, primaryKey={ID}, nameLength=13, columnCount=7">TWEET_REPLIES</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#users" title="FK_TWEET_REPLIES_USERS">USERS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell TWEET_REPLIES_comment"><pre>ユーザがどのツイート・リツイート・リプに対して返信をしたか管理するテーブル
typeとreply_parent_idで返信先が決まる
reply_parent_idのdescに例がある</pre></td>
		<td class="subcell">TweetReplies</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="aliascell">ユーザテーブル</td>
		<td class="namecell" data-name="USERS"><a href="#users" title="type=TABLE, primaryKey={ID}, nameLength=5, columnCount=6">USERS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"><a href="#tweet_likes" title="FK_TWEET_LIKES_USERS">TWEET_LIKES</a>, <a href="#tweet_replies" title="FK_TWEET_REPLIES_USERS">TWEET_REPLIES</a>, <a href="#user_accounts" title="FK_USER_ACCOUNTS_USERS">USER_ACCOUNTS</a>, <a href="#user_follows" title="FK_USER_FOLLOWS_USERS_FOLLOWING">USER_FOLLOWS</a>, <a href="#user_follows" title="FK_USER_FOLLOWS_USERS">USER_FOLLOWS</a>, <a href="#user_retweets" title="FK_USER_RETWEET_USERS">USER_RETWEETS</a>, <a href="#user_tweets" title="FK_USER_TWEETS_USERS">USER_TWEETS</a></td>
		<td class="commentcell USERS_comment"><pre>ユーザを管理するテーブル</pre></td>
		<td class="subcell">Users</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">7</td>
		<td class="aliascell">ユーザとアカウント関連テーブル</td>
		<td class="namecell" data-name="USER_ACCOUNTS"><a href="#user_accounts" title="type=TABLE, primaryKey={ID}, nameLength=13, columnCount=6">USER_ACCOUNTS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#accounts" title="FK_USER_ACCOUNTS_ACCOUNTS">ACCOUNTS</a>, <a href="#users" title="FK_USER_ACCOUNTS_USERS">USERS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell USER_ACCOUNTS_comment"><pre>ユーザとアカウントの関連テーブル</pre></td>
		<td class="subcell">UserAccounts</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">8</td>
		<td class="aliascell">フォロー関係テーブル</td>
		<td class="namecell" data-name="USER_FOLLOWS"><a href="#user_follows" title="type=TABLE, primaryKey={ID}, nameLength=12, columnCount=5">USER_FOLLOWS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#users" title="FK_USER_FOLLOWS_USERS_FOLLOWING">USERS</a>, <a href="#users" title="FK_USER_FOLLOWS_USERS">USERS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell USER_FOLLOWS_comment"><pre>フォローフォロワー関係を管理するテーブル</pre></td>
		<td class="subcell">UserFollows</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">9</td>
		<td class="aliascell">USER_RETWEETS</td>
		<td class="namecell" data-name="USER_RETWEETS"><a href="#user_retweets" title="type=TABLE, primaryKey={ID}, nameLength=13, columnCount=6">USER_RETWEETS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#tweets" title="FK_USER_RETWEET_TWIEETS">TWEETS</a>, <a href="#users" title="FK_USER_RETWEET_USERS">USERS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell USER_RETWEETS_comment"><pre>ユーザがどのツイートに対してリツイートをしたのかを管理するテーブル</pre></td>
		<td class="subcell">UserRetweets</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	<tr>
		<td class="rownumcell">10</td>
		<td class="aliascell">USER_TWEETS</td>
		<td class="namecell" data-name="USER_TWEETS"><a href="#user_tweets" title="type=TABLE, primaryKey={ID}, nameLength=11, columnCount=5">USER_TWEETS</a></td>
		<td class="typecell">TABLE</td>
		<td class="relcell"><a href="#tweets" title="FK_USER_TWEETS_TWIEETS">TWEETS</a>, <a href="#users" title="FK_USER_TWEETS_USERS">USERS</a></td>
		<td class="relcell">&nbsp;</td>
		<td class="commentcell USER_TWEETS_comment"><pre>どのユーザがどのツイートをしたのかを管理するテーブル
USERとTWEETSの中間テーブル</pre></td>
		<td class="subcell">UserTweets</td>
		<td class="subcell">2020/05/14</td>
	</tr>
	</tbody>
</table>

<h2 id="accounts" title="type=TABLE, primaryKey={ID}, nameLength=8, columnCount=8">
(アカウントテーブル)ACCOUNTS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment ACCOUNTS_comment" data-name="ACCOUNTS"><pre>アカウントを管理するテーブル</pre></div>
<input type="hidden" value="ACCOUNTS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="accounts-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">アカウントID</td>
		<td class=" columnnamecell" id="accounts_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell"><a href="#user_accounts" title="FK_USER_ACCOUNTS_ACCOUNTS">USER_ACCOUNTS</a>&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>アカウントのid</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">アカウント名</td>
		<td class=" columnnamecell" id="accounts_name">NAME</td>
		<td class="typecell">VARCHAR</td>
		<td class="sizecell"> 30 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>アカウント名</pre></td>
		<td class="subcell">name</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_ACCOUNTS_DISPLAY_ID(DISPLAY_ID)">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ディスプレイID</td>
		<td class=" columnnamecell" id="accounts_display_id">DISPLAY_ID</td>
		<td class="typecell">VARCHAR</td>
		<td class="sizecell"> 255 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>@の後に続くアカウントのid
検索等に使われる</pre></td>
		<td class="subcell">displayId</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="aliascell">ウェブサイトURL</td>
		<td class=" columnnamecell" id="accounts_web_site_url">WEB_SITE_URL</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ウロフィールに載せるwebのurl</pre></td>
		<td class="subcell">webSiteUrl</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="aliascell">プロフィール文</td>
		<td class=" columnnamecell" id="accounts_description">DESCRIPTION</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>プロフィールに載せる文章</pre></td>
		<td class="subcell">description</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">アイコンURL</td>
		<td class=" columnnamecell" id="accounts_icon_path">ICON_PATH</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザのアイコンのパス</pre></td>
		<td class="subcell">iconPath</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">7</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成された時間</td>
		<td class="comcolcell columnnamecell" id="accounts_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">8</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新された時間</td>
		<td class="comcolcell columnnamecell" id="accounts_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="tweets" title="type=TABLE, primaryKey={ID}, nameLength=6, columnCount=5">
(TWIEETS)TWEETS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment TWEETS_comment" data-name="TWEETS"><pre>ツイートを管理するテーブル</pre></div>
<input type="hidden" value="TWEETS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="tweets-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweets_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell"><a href="#tweet_images" title="FK_TWEET_IMAGES_TWIEETS">TWEET_IMAGES</a>,<br><a href="#tweet_likes" title="FK_TWEET_LIKES_TWIEETS">TWEET_LIKES</a>,<br><a href="#user_retweets" title="FK_USER_RETWEET_TWIEETS">USER_RETWEETS</a>,<br><a href="#user_tweets" title="FK_USER_TWEETS_TWIEETS">USER_TWEETS</a>&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweets_body">BODY</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートの文章</pre></td>
		<td class="subcell">body</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweets_device_type">DEVICE_TYPE</td>
		<td class="typecell">INT UNSIGNED</td>
		<td class="sizecell"> 10 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートしたデバイスのタイプ</pre></td>
		<td class="subcell">deviceType</td>
		<td class="subcell">Integer</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成日</td>
		<td class="comcolcell columnnamecell" id="tweets_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新日</td>
		<td class="comcolcell columnnamecell" id="tweets_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="tweet_images" title="type=TABLE, primaryKey={ID}, nameLength=12, columnCount=6">
(TWEET_IMAGES)TWEET_IMAGES
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment TWEET_IMAGES_comment" data-name="TWEET_IMAGES"><pre>ツイートに対して投稿された画像のパスを紐づけるテーブル
seqでシーケンス番号(順番)を管理している</pre></div>
<input type="hidden" value="TWEET_IMAGES">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="tweet_images-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_images_id">ID</td>
		<td class="typecell">BIGINT</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell" title="FK_TWEET_IMAGES_TWIEETS(TWEET_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_images_tweet_id">TWEET_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#tweets" title="FK_TWEET_IMAGES_TWIEETS">TWEETS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>画像が紐づくツイートのid</pre></td>
		<td class="subcell">tweetId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_images_image_path">IMAGE_PATH</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートに紐づく画像のurl</pre></td>
		<td class="subcell">imagePath</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_images_seq">SEQ</td>
		<td class="typecell">INT</td>
		<td class="sizecell"> 10 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートに載せる画像の順番</pre></td>
		<td class="subcell">seq</td>
		<td class="subcell">Integer</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成日</td>
		<td class="comcolcell columnnamecell" id="tweet_images_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新日</td>
		<td class="comcolcell columnnamecell" id="tweet_images_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="tweet_likes" title="type=TABLE, primaryKey={ID}, nameLength=11, columnCount=5">
(NEW_TABLE)TWEET_LIKES
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment TWEET_LIKES_comment" data-name="TWEET_LIKES"><pre>ユーザがどのツイートにいいねしたかを管理するテーブル</pre></div>
<input type="hidden" value="TWEET_LIKES">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="tweet_likes-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_likes_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_TWEET_LIKES_TWEET_ID_LIKED_USER_ID(TWEET_ID, LIKED_USER_ID)">o<span class="flgplus">+</span></td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_likes_tweet_id">TWEET_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#tweets" title="FK_TWEET_LIKES_TWIEETS">TWEETS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>いいねされたツイートのid</pre></td>
		<td class="subcell">tweetId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_TWEET_LIKES_TWEET_ID_LIKED_USER_ID(TWEET_ID, LIKED_USER_ID)"><span class="flgplus">+</span>o</td>
		<td class="flgcell" title="FK_TWEET_LIKES_USERS(LIKED_USER_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ユーザID</td>
		<td class=" columnnamecell" id="tweet_likes_liked_user_id">LIKED_USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_TWEET_LIKES_USERS">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートにいいねしたユーザのid</pre></td>
		<td class="subcell">likedUserId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成日</td>
		<td class="comcolcell columnnamecell" id="tweet_likes_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新日</td>
		<td class="comcolcell columnnamecell" id="tweet_likes_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="tweet_replies" title="type=TABLE, primaryKey={ID}, nameLength=13, columnCount=7">
(TWEET_REPLIES)TWEET_REPLIES
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment TWEET_REPLIES_comment" data-name="TWEET_REPLIES"><pre>ユーザがどのツイート・リツイート・リプに対して返信をしたか管理するテーブル
typeとreply_parent_idで返信先が決まる
reply_parent_idのdescに例がある</pre></div>
<input type="hidden" value="TWEET_REPLIES">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="tweet_replies-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_replies_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell" title="FK_TWEET_REPLIES_USERS(REPLY_USER_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ユーザID</td>
		<td class=" columnnamecell" id="tweet_replies_reply_user_id">REPLY_USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_TWEET_REPLIES_USERS">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートに返信したユーザのid</pre></td>
		<td class="subcell">replyUserId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_replies_seq">SEQ</td>
		<td class="typecell">INT UNSIGNED</td>
		<td class="sizecell"> 10 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>返信の順番</pre></td>
		<td class="subcell">seq</td>
		<td class="subcell">Integer</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_replies_reply_parent_id">REPLY_PARENT_ID</td>
		<td class="typecell">INT UNSIGNED</td>
		<td class="sizecell"> 10 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>返信したツイートのid
typeと連動している
例 : 
type : 1、reply_parent_id  : 1
tweet_id 1のスレッドに対して返信

type : 2、reply_parent_id  : 1
retweet_id 1 のスレッドに対しての返信

type : 3、reply_parent_id  : 1
replies_id 1にたいしての返信
返信に対しての返信</pre></td>
		<td class="subcell">replyParentId</td>
		<td class="subcell">Integer</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="tweet_replies_type">TYPE</td>
		<td class="typecell">INT UNSIGNED</td>
		<td class="sizecell"> 10 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>返信したスレッドのタイプ
1 → tweet thread
2 → retweet thread
3 → reply thread</pre></td>
		<td class="subcell">type</td>
		<td class="subcell">Integer</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell"></td>
		<td class="comcolcell columnnamecell" id="tweet_replies_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">7</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell"></td>
		<td class="comcolcell columnnamecell" id="tweet_replies_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="users" title="type=TABLE, primaryKey={ID}, nameLength=5, columnCount=6">
(ユーザテーブル)USERS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment USERS_comment" data-name="USERS"><pre>ユーザを管理するテーブル</pre></div>
<input type="hidden" value="USERS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="users-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ユーザID</td>
		<td class=" columnnamecell" id="users_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell"><a href="#tweet_likes" title="FK_TWEET_LIKES_USERS">TWEET_LIKES</a>,<br><a href="#tweet_replies" title="FK_TWEET_REPLIES_USERS">TWEET_REPLIES</a>,<br><a href="#user_accounts" title="FK_USER_ACCOUNTS_USERS">USER_ACCOUNTS</a>,<br><a href="#user_follows" title="FK_USER_FOLLOWS_USERS_FOLLOWING">USER_FOLLOWS</a>,<br><a href="#user_follows" title="FK_USER_FOLLOWS_USERS">USER_FOLLOWS</a>,<br><a href="#user_retweets" title="FK_USER_RETWEET_USERS">USER_RETWEETS</a>,<br><a href="#user_tweets" title="FK_USER_TWEETS_USERS">USER_TWEETS</a>&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザのid</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">メールアドレス</td>
		<td class=" columnnamecell" id="users_email">EMAIL</td>
		<td class="typecell">VARCHAR</td>
		<td class="sizecell"> 255 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザのメールアドレス</pre></td>
		<td class="subcell">email</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">パスワード</td>
		<td class=" columnnamecell" id="users_password">PASSWORD</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザのパスワード</pre></td>
		<td class="subcell">password</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">トークン</td>
		<td class=" columnnamecell" id="users_token">TOKEN</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザのトークン</pre></td>
		<td class="subcell">token</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成された時間</td>
		<td class="comcolcell columnnamecell" id="users_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新された時間</td>
		<td class="comcolcell columnnamecell" id="users_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="user_accounts" title="type=TABLE, primaryKey={ID}, nameLength=13, columnCount=6">
(ユーザとアカウント関連テーブル)USER_ACCOUNTS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment USER_ACCOUNTS_comment" data-name="USER_ACCOUNTS"><pre>ユーザとアカウントの関連テーブル</pre></div>
<input type="hidden" value="USER_ACCOUNTS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="user_accounts-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">アカウントID</td>
		<td class=" columnnamecell" id="user_accounts_id">ID</td>
		<td class="typecell">BIGINT</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>アカウントのid</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell" title="FK_USER_ACCOUNTS_USERS(USER_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ユーザID</td>
		<td class=" columnnamecell" id="user_accounts_user_id">USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_USER_ACCOUNTS_USERS">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>アカウントを所有しているユーザのid</pre></td>
		<td class="subcell">userId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell" title="FK_USER_ACCOUNTS_ACCOUNTS(ACCOUNT_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell">所持アカウントID</td>
		<td class=" columnnamecell" id="user_accounts_account_id">ACCOUNT_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#accounts" title="FK_USER_ACCOUNTS_ACCOUNTS">ACCOUNTS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザの所有しているアカウントid</pre></td>
		<td class="subcell">accountId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">更新された時間</td>
		<td class=" columnnamecell" id="user_accounts_update_at">UPDATE_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updateAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">作成された時間</td>
		<td class=" columnnamecell" id="user_accounts_create_at">CREATE_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">直前サインイン時間</td>
		<td class=" columnnamecell" id="user_accounts_signed_in_at">SIGNED_IN_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>アカウントのログインした時間</pre></td>
		<td class="subcell">signedInAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="user_follows" title="type=TABLE, primaryKey={ID}, nameLength=12, columnCount=5">
(フォロー関係テーブル)USER_FOLLOWS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment USER_FOLLOWS_comment" data-name="USER_FOLLOWS"><pre>フォローフォロワー関係を管理するテーブル</pre></div>
<input type="hidden" value="USER_FOLLOWS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="user_follows-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">フォローフォロワー関係のID</td>
		<td class=" columnnamecell" id="user_follows_id">ID</td>
		<td class="typecell">BIGINT</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell" title="FK_USER_FOLLOWS_USERS(USER_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell">被フォローユーザID</td>
		<td class=" columnnamecell" id="user_follows_user_id">USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_USER_FOLLOWS_USERS">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>フォローしたユーザのID</pre></td>
		<td class="subcell">userId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell" title="FK_USER_FOLLOWS_USERS_FOLLOWING(FOLLOWING_USER_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell">フォローユーザID</td>
		<td class=" columnnamecell" id="user_follows_following_user_id">FOLLOWING_USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_USER_FOLLOWS_USERS_FOLLOWING">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>フォローされたユーザのid</pre></td>
		<td class="subcell">followingUserId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成された時間</td>
		<td class="comcolcell columnnamecell" id="user_follows_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新された時間</td>
		<td class="comcolcell columnnamecell" id="user_follows_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="user_retweets" title="type=TABLE, primaryKey={ID}, nameLength=13, columnCount=6">
(USER_RETWEETS)USER_RETWEETS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment USER_RETWEETS_comment" data-name="USER_RETWEETS"><pre>ユーザがどのツイートに対してリツイートをしたのかを管理するテーブル</pre></div>
<input type="hidden" value="USER_RETWEETS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="user_retweets-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="user_retweets_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザのid</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_USER_RETWEET_USER_ID_RETWEET_ID(USER_ID, TWEET_ID)">o<span class="flgplus">+</span></td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ユーザID</td>
		<td class=" columnnamecell" id="user_retweets_user_id">USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_USER_RETWEET_USERS">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>リツイートしたユーザのid</pre></td>
		<td class="subcell">userId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_USER_RETWEET_USER_ID_RETWEET_ID(USER_ID, TWEET_ID)"><span class="flgplus">+</span>o</td>
		<td class="flgcell" title="FK_USER_RETWEET_TWIEETS(TWEET_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="user_retweets_tweet_id">TWEET_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#tweets" title="FK_USER_RETWEET_TWIEETS">TWEETS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>リツイートしたtweet_id</pre></td>
		<td class="subcell">tweetId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="user_retweets_body">BODY</td>
		<td class="typecell">TEXT</td>
		<td class="sizecell"> 65535 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>リツイートする際の文章</pre></td>
		<td class="subcell">body</td>
		<td class="subcell">String</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">作成日</td>
		<td class="comcolcell columnnamecell" id="user_retweets_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">6</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell">更新日</td>
		<td class="comcolcell columnnamecell" id="user_retweets_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>

<h2 id="user_tweets" title="type=TABLE, primaryKey={ID}, nameLength=11, columnCount=5">
(USER_TWEETS)USER_TWEETS
&nbsp;<span class="tablefirstdatetitle">since 2020/05/14</span>
</h2>
<div class="tablecomment USER_TWEETS_comment" data-name="USER_TWEETS"><pre>どのユーザがどのツイートをしたのかを管理するテーブル
USERとTWEETSの中間テーブル</pre></div>
<input type="hidden" value="USER_TWEETS">
<table class="tablecontent">
	<thead>
	<tr>
		<th class="rownumhead">No.</th>
		<th>PK</th>
		<th>ID</th>
		<th>UQ</th>
		<th>IX</th>
		<th>Not<br />Null</th>
		<th>Alias</th>
		<th>Name</th>
		<th>Type</th>
		<th>Size</th>
		<th>ForeignTable</th>
		<th>ReferrerTable</th>
		<th>Classification</th>
		<th>ColumnComment</th>
		<th>PropertyName</th>
		<th>JavaType</th>
		<th>Since</th>
	</tr>
	</thead>
	<tbody id="user_tweets-body">
	<tr>
		<td class="rownumcell">1</td>
		<td class="flgcell" title="PRIMARY">o</td>
		<td class="flgcell">o</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="user_tweets_id">ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">id</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">2</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_USER_TWEETS_USER_ID_TWEET_ID(USER_ID, TWEET_ID)">o<span class="flgplus">+</span></td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell">ユーザID</td>
		<td class=" columnnamecell" id="user_tweets_user_id">USER_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#users" title="FK_USER_TWEETS_USERS">USERS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ツイートしたユーザのid</pre></td>
		<td class="subcell">userId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">3</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell" title="UQ_USER_TWEETS_USER_ID_TWEET_ID(USER_ID, TWEET_ID)"><span class="flgplus">+</span>o</td>
		<td class="flgcell" title="FK_USER_TWEETS_TWIEETS(TWEET_ID)">o</td>
		<td class="flgcell">*</td>
		<td class="aliascell"></td>
		<td class=" columnnamecell" id="user_tweets_tweet_id">TWEET_ID</td>
		<td class="typecell">BIGINT UNSIGNED</td>
		<td class="sizecell"> 20 </td>
		<td class="relcell"><a href="#tweets" title="FK_USER_TWEETS_TWIEETS">TWEETS</a>&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>ユーザがツイートした時のid</pre></td>
		<td class="subcell">tweetId</td>
		<td class="subcell">Long</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">4</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell"></td>
		<td class="comcolcell columnnamecell" id="user_tweets_updated_at">UPDATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">updatedAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	<tr>
		<td class="rownumcell">5</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell"> &nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">&nbsp;</td>
		<td class="flgcell">*</td>
		<td class="aliascell comcolcell"></td>
		<td class="comcolcell columnnamecell" id="user_tweets_created_at">CREATED_AT</td>
		<td class="typecell">DATETIME</td>
		<td class="sizecell"> 19 </td>
		<td class="relcell">&nbsp;&nbsp;</td>
		<td class="relcell">&nbsp;</td>
		<td class="relcell"> &nbsp;</td>
		<td class="commentcell"><pre>&nbsp;</pre></td>
		<td class="subcell">createdAt</td>
		<td class="subcell">LocalDateTime</td>
		<td class="subcell">first</td>
	</tr>
	</tbody>
</table>




<h2 id="schemapolicy">Schema Policy</h2>
<pre class="spolicydisp">

[Schema Policy]
 tableExceptList: []
 tableTargetList: []
 columnExceptMap: {}
 isMainSchemaOnly: false
 wholeMap:
   themeList: [uniqueTableAlias, sameColumnAliasIfSameColumnName, sameColumnDbTypeIfSameColumnName, sameColumnSizeIfSameColumnName, sameColumnNameIfSameColumnAlias]
   statementList:
 tableMap:
   themeList: [hasPK, hasAlias, upperCaseBasis, identityIfPureIDPK, hasComment, hasCommonColumn]
   statementList:
    {if:{tableName is $$ALL$$}} {then:{fkName is prefix:FK_$$table$$}}
    {if:{tableName is $$ALL$$}} {then:{indexName is prefix:IX_$$table$$ or prefix:FK_$$table$$}}
    {if:{tableName is $$ALL$$}} {then:{uniqueName is prefix:UQ_$$table$$}}
 columnMap:
   themeList: [hasAlias, upperCaseBasis]
   statementList:
    {if:{columnName is suffix:_ID}} {then:{dbType is bigint or int}}
    {if:{columnName is suffix:_CODE}} {then:{dbType is char(3)}}
    {if:{columnName is suffix:_FLG}} {then:{dbType is bit(1)} =&gt; FLGで終わるカラムはbooleanを使用してください}
    {if:{columnName is suffix:_FLG}} {then:{column is notNull}}
    {if:{dbType_with_size is bit(1)}} {then:{column_name is suffix:_FLG}}
    {if:{columnName is suffix:_AT}} {then:{dbType is date} or then:{dbType is datetime}}
    {if:{dbType is date}} {then:{columnName is suffix:_AT}}
    {if:{dbType is datetime}} {then:{columnName is suffix:_AT}}
</pre>

<h2 id="thanks">Thanks</h2>
<p>
	Created by <a href="http://dbflute.org/">DBFlute(AutoGenerator)</a>
</p>

<!-- Only used by dbflute intro http://dbflute.seasar.org/ja/manual/function/helper/intro/index.html -->
<div id="decomment-modal" class="decommentmodal">
	<div class="decommentmodalcontent">
		<div id="decomment-close" class="decommentmodal-close-btn"><span>x</span></div>
		<p>Input the new column comment of <span id="decomment-modal-column-info"></span></p>
		<textarea id="decomment-input" class="decommentinput" rows="5"></textarea>
		<div id="decomment-user-input" class="decomment-user-input"><input type="text" id="decomment-user-name" class="decomment-user-name" placeholder="User name"/><span class="decomment-user-name-desc">*required (saved in cookie)</span></div>
		<div class="decommentmodal-ok-area"><button id="decomment-ok" class="decommentmodal-ok-btn">OK</button></div>
	</div>
</div>
<script>
/**
 * Incremental Search contributed by makotot (Thanks!)
 *
 * and extended by jflute:
 *  o style adjustment
 *  o varying name index
 *  o prefix search priority
 */

// this index value depends on DBFlute settings
// so defines it here as global for easy-to-understand
var NAME_INDEX = 2; // number, alias, name

function Incremental (targetInput, dist) {
	this.targetInput = targetInput;
	this.dist = dist;
	this.query = '';
	this.suggestionIdx = 0;
	this.currentSuggestion = '';
}

Incremental.prototype = {

	/**
	 * Init
	 */
	init: function () {
		var dataList = this.getDataList();

		this.distDataList = dataList.distList;
		this.sectionList = dataList.sectionList;
		this.buildSuggestList();
		this.attachEvent();
	},

	/**
	 * Build sugget list
	 */
	buildSuggestList: function () {
		var fragment = document.createDocumentFragment(),
			ul = document.getElementById('suggestion-list');

		this.ul = ul;
		this.setupLinkElement(fragment); // for prefix area
		this.setupLinkElement(fragment); // for contain area
		ul.appendChild(fragment);

		this.attachSuggestionEvent();
	},

	/**
	 * Setup link element
	 */
	setupLinkElement: function (fragment) {
		var li, anchor;
		for (var i = 0, max = this.distDataList.length; i < max; i++) {
			li = document.createElement('li');
			li.style.display = 'none';
			anchor = document.createElement('a');
			anchor.href = this.sectionList[i];

			var distData = this.distDataList[i];
			if (document.body.dataset) {
				anchor.dataset.name = distData;
			} else {
				anchor.setAttribute('data-name', distData); // for searching
			}

			this.util.setElemTxt(anchor, distData); // for display

			li.appendChild(anchor);
			fragment.appendChild(li);
		}
	},

	/**
	 * Attach event
	 */
	attachEvent: function () {
		var self = this,
			eventHandler = function () {
				self.displaySuggestion();
			},
			eventName = ('oninput' in window) ? 'input' : 'propertychange';

		this.util.addEvent(this.targetInput, eventName, eventHandler);
	},

	/**
	 * Display suggestion
	 */
	displaySuggestion: function () {
		this.query = (this.util.trim(this.targetInput.value)).toLowerCase();

		var i, j, max;

		this.resetSuggestion();

		var visibleList;

		if (this.query.length) {
			var alreadyCheckedData = {}; // to suppress duplicate check (key only used)
			var distDataCount = this.distDataList.length; // to determine prefix or contain area
			var hitCount = 0; // to suppress large result (primitive counter just in case)
			for (i = 0, max = this.ul.childNodes.length; i < max && hitCount <= 100; i++) {
				var childNode = this.ul.childNodes[i];
				var anchor = childNode.getElementsByTagName('a')[0]; // always only one
				var dataName = anchor.getAttribute('data-name'); // e.g. table name
				if (alreadyCheckedData[dataName] != null) { // to suppress duplicate check
					continue;
				}
				if (i < distDataCount && dataName.lastIndexOf(this.query, 0) > -1) { // prefix hit
					childNode.searchDirection = 'prefix';
					alreadyCheckedData[dataName] = 'dummy';
					++hitCount;
				} else if (i >= distDataCount && dataName.indexOf(this.query) > -1) { // contain hit
					childNode.searchDirection = 'contain';
					alreadyCheckedData[dataName] = 'dummy';
					++hitCount;
				} else {
					childNode.searchDirection = 'none';
				}
			}

			visibleList = this.filterVisibleChild();

			if (visibleList.length) {
				visibleList[0].style.backgroundColor = '#CCCCCC';
			}
		} else {
			for (i = 0, max = this.ul.childNodes.length; i < max; i++) {
				var childNode = this.ul.childNodes[i];
				childNode.searchDirection = null; // clear
				childNode.style.display = 'none'; // all none
			}
		}
	},

	/**
	 * Get data list
	 */
	getDataList: function () {
		var tr = this.dist.getElementsByTagName('tr'),
			distDataList = [],
			sectionIdList = [];

		for (var i = 0, max = tr.length; i < max; i++) {
			distDataList.push(this.util.getElemTxt(tr[i].getElementsByTagName('td')[NAME_INDEX]).toLowerCase());
			sectionIdList.push(tr[i].getElementsByTagName('td')[NAME_INDEX].getElementsByTagName('a')[0].getAttribute('href'));
		}

		return {
			distList: distDataList,
			sectionList: sectionIdList
		};
	},

	/**
	 * Attach suggestion event
	 */
	attachSuggestionEvent: function () {
		var self = this;

		this.util.addEvent(this.targetInput, 'keyup', function (e) {
			self.selectSuggestion(e);
			self.setInputValue(e);
		});
		this.util.addEvent(this.targetInput, 'blur', function () {
			setTimeout(function () {
				self.resetSuggestion();
			}, 100);
		});
	},

	/**
	 * Select suggestion
	 */
	selectSuggestion: function (ev) {
		var keyCode = ev.keyCode,
			visibleChildNodes = this.filterVisibleChild(),
			prevIdx;

		if (keyCode === 38 || keyCode === 40) {

			if (visibleChildNodes.length) {
				prevIdx = this.suggestionIdx;

				if (keyCode === 40 && this.suggestionIdx < visibleChildNodes.length - 1) {
					this.suggestionIdx++;
				}

				if (keyCode === 38 && this.suggestionIdx > 0) {
					this.suggestionIdx--;
				}

				if (prevIdx > -1) {
					visibleChildNodes[prevIdx].style.backgroundColor = '';
				}

				visibleChildNodes[this.suggestionIdx].style.backgroundColor = '#CCCCCC';
				this.currentSuggestion = this.util.getElemTxt(visibleChildNodes[this.suggestionIdx]);

			} else if (this.query.length) {

				this.displaySuggestion();
			}
		}

		if (!this.query.length) {
			this.resetSuggestion();
		}
	},

	/**
	 * Set input value
	 * @param {Object} ev
	 */
	setInputValue: function (ev) {
		var keyCode = ev.keyCode,
			visibleChildNodes = this.filterVisibleChild(),
			currentSuggestionTxt,
			selectedSection;

		if (visibleChildNodes.length) {
			currentSuggestionTxt = this.util.getElemTxt(visibleChildNodes[this.suggestionIdx]);

			if (keyCode === 13) {
				this.targetInput.value = currentSuggestionTxt;
				selectedSection = this.getSelectedSection(visibleChildNodes[this.suggestionIdx]);
				this.clearSuggestion();
				this.scrollToSelectedSection(selectedSection);
				this.setHash(selectedSection);
			}
		}
	},

	/**
	 * Filter visible child
	 */
	filterVisibleChild: function () {
		var visibleChildNodes = [];

		// ordered by prefix, contain
		for (var i = 0, max = this.ul.childNodes.length; i < max; i++) {
			var childNode = this.ul.childNodes[i];
			if (childNode.searchDirection === 'prefix') {
				visibleChildNodes.push(childNode);
				childNode.style.display = 'block';
			} else if (childNode.searchDirection === 'contain') {
				visibleChildNodes.push(childNode);
				childNode.style.display = 'block';
			} else {
				childNode.style.display = 'none';
			}
		}

		return visibleChildNodes;
	},

	/**
	 * Clear suggestion
	 */
	clearSuggestion: function () {
		for (var i = 0, max = this.ul.childNodes.length; i < max; i++) {
			var childNode = this.ul.childNodes[i];
			childNode.searchDirection = null;
			childNode.style.display = 'none';
			childNode.style.backgroundColor = '';
		}
	},

	/**
	 * Reset suggestion
	 */
	resetSuggestion: function () {
		this.clearSuggestion();

		this.suggestionIdx = 0;
	},

	/**
	 * Get selected section
	 * @param {Object} suggestionNode
	 * @return {number} Selected Index
	 */
	getSelectedSection: function (suggestionNode) {
		var selectedIdx;

		for (var i = 0, max = this.ul.childNodes.length; i < max; i++) {
			if (this.ul.childNodes[i] === suggestionNode) {
				selectedIdx = i;
				break;
			}
		}

		return selectedIdx;
	},

	/**
	 * Scroll to selected section
	 * @param {number} idx
	 */
	scrollToSelectedSection: function (idx) {
		var selectedId = this.ul.childNodes[idx].getElementsByTagName('a')[0].href.split('#')[1],
			targetSection = document.getElementById(selectedId);

		window.scrollTo(0, targetSection.offsetTop);
		this.targetInput.blur();
	},

	/**
	 * Set hash
	 */
	setHash: function (idx) {
		var selectedId = this.ul.childNodes[idx].getElementsByTagName('a')[0].href.split('#')[1];

		window.location.hash = selectedId;
	}
};


Incremental.prototype.util = {

	addEvent: function (elem, ev, fn) {
		if (elem.addEventListener) {
			elem.addEventListener(ev, fn, false);
		} else if (elem.attachEvent) {
			elem.attachEvent('on' + ev, fn);
		} else {
			elem['on' + ev] = fn;
		}
	},

	trim: function (txt) {
		return (String.prototype.trim) ? txt.trim() : txt.replace(/^\s+|\s+$/g, '');
	},

	getElemTxt: function (elem) {
		return (elem.innerText !== undefined) ? elem.innerText : elem.textContent;
	},

	setElemTxt: function (elem, data) {
		return (elem.innerText !== undefined) ? (elem.innerText = data) : (elem.textContent = data);
	}
};

var searcher = new Incremental(document.getElementById('incremental-search-field'), document.getElementById('table-list-body'));
searcher.init();
</script>
<script>

/**
 * @author deco
 */
function ApiClient() {
}

ApiClient.prototype = {
	/**
	 * Fetch decomment viertual pickup.
	 * @param {function} successCallback
	 */
	fetchDecomment: function(successCallback) {
		var path = '/api/document/decomment/' + DecommentUtil.getSchemaName() + '/pickup';
		var method = 'GET';
		var errorCallback = function() {
			alert('Error!! cannot save decomment.');
		}
		this.request(path, method, null, successCallback, errorCallback);
	},
	/**
	 * Request save decomment
	 * @param {Object} params - Request parameters
	 * @param {function} successCallback
	 */
	saveDecomment: function(params, successCallback) {
		var path = '/api/document/decomment/' + DecommentUtil.getSchemaName() + '/save';
		var method = 'POST';
		var errorCallback = function() {
			alert('Error!! cannot save new column comment.');
		}
		this.request(path, method, params, successCallback, errorCallback);
	},
	/**
	 * Post mapping table.
	 * @param {Object} params - Request parameters
	 * @param {function} successCallback
	 */
	postMapping: function(params, successCallback) {
		var path = '/api/document/decomment/' + DecommentUtil.getSchemaName() + '/mapping';
		var method = 'POST';
		var errorCallback = function() {
			alert('Error!! cannot save new table mapping.');
		}
		this.request(path, method, params, successCallback, errorCallback);
	},
	/**
	 * Request to intro server
	 * @param {string} path
	 * @param {string} method
	 * @param {object} params
	 * @param {function} successCallback
	 * @param {function} errorCallback
	 */
	request: function(path, method, params, successCallback, errorCallback) {
		var http = new XMLHttpRequest();
		http.withCredentials = true;
		var url = DecommentUtil.getHostName() + path;
		http.open(method, url, true);

		http.onreadystatechange = function () {
			if (http.readyState === 4) {
				if (http.status === 200) {
					successCallback(http.response)
				} else {
					errorCallback()
				}
			}
		};
		if (params != null) {
			http.send(JSON.stringify(params, null, "  "));
		} else {
			http.send();
		}
	}
}

/**
 * @author deco
 */
var DecommentUtil = new function(){
	/**
	 * Get host name
	 * @returns {string} Host name
	 */
	this.getHostName = function() {
		return 'http://' + window.location.host;
	},
	/**
	 * Get scheme name from url
	 * @returns {string} Scheme name
	 */
	this.getSchemaName = function () {
		return "twitterdb";
	},
	/**
	 * Escape inputed text
	 * @param {String} string - text
	 */
	this.escapeInputText = function(string) {
		if(typeof string !== 'string') {
			return string;
		}
		return string.replace(/[&'`"<>]/g, function(match) {
			return {
				'&': '&amp;',
				"'": '&#x27;',
				'`': '&#x60;',
				'"': '&quot;',
				'<': '&lt;',
				'>': '&gt;',
			}[match]
		});
	},
	/**
	 * Escape newline character of text
	 * @param {String} string - text
	 */
	this.escapeNewlineCharacter = function (string) {
		return string.split('<br>').join('\n');
	},
	/**
	 * Delete unnecessary whitespace
	 * @param {String} string - text
	 */
	this.deleteUnnecessaryWhitespace = function(string) {
		var commentArray = string.split("\n");
		var result = "";
		for(var i = 0; i < commentArray.length; i++) {
			result += commentArray[i].replace(/\s+$/g,'');
			if (!(i == commentArray.length - 1)) {
				result += '\n';
			}
		}
		return result.trim();
	},

	/**
	 * Unescape whitespace character of text
	 * @param {String} string - text
	 */
	this.unescapeWhitespace = function (string) {
		return string.split('&nbsp;').join(' ');
	},
	/**
	 * Check is opening with server mode.
	 */
	this.isDecommentServer = function() {
		return document.getElementById("decomment_server") != null;
	}
}

/**
 * @author deco
 */
function StoreClient() {
	// setup from dbflute if decomment pickup exists
	this.embeddedPickup = {
		'tables': [
		]
	}
	this.pickupStore = {
		'ACCOUNTS': {
			'databaseComment': 'アカウントを管理するテーブル'
			, 'columns': {
				'ID': {
					'databaseComment': 'アカウントのid'
				}
				, 'NAME': {
					'databaseComment': 'アカウント名'
				}
				, 'DISPLAY_ID': {
					'databaseComment': '@の後に続くアカウントのid<br>検索等に使われる'
				}
				, 'WEB_SITE_URL': {
					'databaseComment': 'ウロフィールに載せるwebのurl'
				}
				, 'DESCRIPTION': {
					'databaseComment': 'プロフィールに載せる文章'
				}
				, 'ICON_PATH': {
					'databaseComment': 'ユーザのアイコンのパス'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'TWEETS': {
			'databaseComment': 'ツイートを管理するテーブル'
			, 'columns': {
				'ID': {
					'databaseComment': ''
				}
				, 'BODY': {
					'databaseComment': 'ツイートの文章'
				}
				, 'DEVICE_TYPE': {
					'databaseComment': 'ツイートしたデバイスのタイプ'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'TWEET_IMAGES': {
			'databaseComment': 'ツイートに対して投稿された画像のパスを紐づけるテーブル<br>seqでシーケンス番号(順番)を管理している'
			, 'columns': {
				'ID': {
					'databaseComment': ''
				}
				, 'TWEET_ID': {
					'databaseComment': '画像が紐づくツイートのid'
				}
				, 'IMAGE_PATH': {
					'databaseComment': 'ツイートに紐づく画像のurl'
				}
				, 'SEQ': {
					'databaseComment': 'ツイートに載せる画像の順番'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'TWEET_LIKES': {
			'databaseComment': 'ユーザがどのツイートにいいねしたかを管理するテーブル'
			, 'columns': {
				'ID': {
					'databaseComment': ''
				}
				, 'TWEET_ID': {
					'databaseComment': 'いいねされたツイートのid'
				}
				, 'LIKED_USER_ID': {
					'databaseComment': 'ツイートにいいねしたユーザのid'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'TWEET_REPLIES': {
			'databaseComment': 'ユーザがどのツイート・リツイート・リプに対して返信をしたか管理するテーブル<br>typeとreply_parent_idで返信先が決まる<br>reply_parent_idのdescに例がある'
			, 'columns': {
				'ID': {
					'databaseComment': ''
				}
				, 'REPLY_USER_ID': {
					'databaseComment': 'ツイートに返信したユーザのid'
				}
				, 'SEQ': {
					'databaseComment': '返信の順番'
				}
				, 'REPLY_PARENT_ID': {
					'databaseComment': '返信したツイートのid<br>typeと連動している<br>例&nbsp;:&nbsp;<br>type&nbsp;:&nbsp;1、reply_parent_id&nbsp;&nbsp;:&nbsp;1<br>tweet_id&nbsp;1のスレッドに対して返信<br><br>type&nbsp;:&nbsp;2、reply_parent_id&nbsp;&nbsp;:&nbsp;1<br>retweet_id&nbsp;1&nbsp;のスレッドに対しての返信<br><br>type&nbsp;:&nbsp;3、reply_parent_id&nbsp;&nbsp;:&nbsp;1<br>replies_id&nbsp;1にたいしての返信<br>返信に対しての返信'
				}
				, 'TYPE': {
					'databaseComment': '返信したスレッドのタイプ<br>1&nbsp;→&nbsp;tweet&nbsp;thread<br>2&nbsp;→&nbsp;retweet&nbsp;thread<br>3&nbsp;→&nbsp;reply&nbsp;thread'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'USERS': {
			'databaseComment': 'ユーザを管理するテーブル'
			, 'columns': {
				'ID': {
					'databaseComment': 'ユーザのid'
				}
				, 'EMAIL': {
					'databaseComment': 'ユーザのメールアドレス'
				}
				, 'PASSWORD': {
					'databaseComment': 'ユーザのパスワード'
				}
				, 'TOKEN': {
					'databaseComment': 'ユーザのトークン'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'USER_ACCOUNTS': {
			'databaseComment': 'ユーザとアカウントの関連テーブル'
			, 'columns': {
				'ID': {
					'databaseComment': 'アカウントのid'
				}
				, 'USER_ID': {
					'databaseComment': 'アカウントを所有しているユーザのid'
				}
				, 'ACCOUNT_ID': {
					'databaseComment': 'ユーザの所有しているアカウントid'
				}
				, 'UPDATE_AT': {
					'databaseComment': ''
				}
				, 'CREATE_AT': {
					'databaseComment': ''
				}
				, 'SIGNED_IN_AT': {
					'databaseComment': 'アカウントのログインした時間'
				}
			}
		}
		, 'USER_FOLLOWS': {
			'databaseComment': 'フォローフォロワー関係を管理するテーブル'
			, 'columns': {
				'ID': {
					'databaseComment': ''
				}
				, 'USER_ID': {
					'databaseComment': 'フォローしたユーザのID'
				}
				, 'FOLLOWING_USER_ID': {
					'databaseComment': 'フォローされたユーザのid'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'USER_RETWEETS': {
			'databaseComment': 'ユーザがどのツイートに対してリツイートをしたのかを管理するテーブル'
			, 'columns': {
				'ID': {
					'databaseComment': 'ユーザのid'
				}
				, 'USER_ID': {
					'databaseComment': 'リツイートしたユーザのid'
				}
				, 'TWEET_ID': {
					'databaseComment': 'リツイートしたtweet_id'
				}
				, 'BODY': {
					'databaseComment': 'リツイートする際の文章'
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
			}
		}
		, 'USER_TWEETS': {
			'databaseComment': 'どのユーザがどのツイートをしたのかを管理するテーブル<br>USERとTWEETSの中間テーブル'
			, 'columns': {
				'ID': {
					'databaseComment': ''
				}
				, 'USER_ID': {
					'databaseComment': 'ツイートしたユーザのid'
				}
				, 'TWEET_ID': {
					'databaseComment': 'ユーザがツイートした時のid'
				}
				, 'UPDATED_AT': {
					'databaseComment': ''
				}
				, 'CREATED_AT': {
					'databaseComment': ''
				}
			}
		}
	}

	this.unmappedTableArea = new UnmappedTableArea();
	this.unmappedColumnArea = new UnmappedColumnArea();
}

StoreClient.prototype = {
	/**
	 * Store pickup json to store
	 * @param {Object} pickup - pickup response
	 */
	storePickup: function (pickup) {
		var that = this;
		Array.prototype.forEach.call(pickup["tables"], function (table) {
			that.storePickupTable(table);
			var tableProperty = that.getTablePickup(table['tableName'])
			if (tableProperty.selectTargetHtmlElements().length === 0) {
				that.unmappedTableArea.push(table);
				return;
			}
			Array.prototype.forEach.call(table["columns"], function (column) {
				var columnProperty = that.getColumnPickup(table['tableName'], column['columnName'])
				if (!columnProperty.selectTargetHtmlElement()) {
					that.unmappedColumnArea.push(table, column);
					return;
				}
				that.storePickupColumn(table['tableName'], column);
			});
		});
	},

	/**
	 * Store table
	 * @param {Object} table - table object of pickup response
	 */
	storePickupTable: function (table) {
		// init if not exists
		var tableName = table['tableName'];
		if (this.pickupStore[tableName] === undefined) {
			this.pickupStore[tableName] = {};
		}

		// return if not have properties
		var properties = table['properties'];
		if (properties.length === 0) {
			return;
		}

		// get database comment
		var tableMap = this.pickupStore[tableName];
		var databaseComment = tableMap['databaseComment'];

		// setup properties to store
		var isConflict = properties.length > 1;
		var isDatabaseCommentConflict = false;
		var decomments = [];
		var previousPieces = [];
		var authors = [];
		var commentVersion = 0;
		var that = this;
		Array.prototype.forEach.call(properties, function (property) {
			if (property['databaseComment'] != null && databaseComment != null && !isDatabaseCommentConflict) {
				isDatabaseCommentConflict = DecommentUtil.escapeNewlineCharacter(databaseComment) != DecommentUtil.escapeNewlineCharacter(property['databaseComment']);
			}
			var decomment = {
				"body": property["decomment"],
				"pieceOwner": property["pieceOwner"],
				"pieceGitBranch": property["pieceGitBranch"]
			}
			decomments.push(decomment);
			if (property['pieceCode'] != null) {
				previousPieces.push(property['pieceCode']);
			}
			authors = authors.concat(property['authors']);
			if (commentVersion < property['commentVersion']) {
				commentVersion = property['commentVersion'];
			}
		});
		authors = authors.filter(function (x, i, self) {
			return self.indexOf(x) === i;
		});

		tableMap['isConflict'] = isConflict || isDatabaseCommentConflict;
		tableMap['isDatabaseCommentConflict'] = isDatabaseCommentConflict;
		tableMap['decomments'] = decomments;
		tableMap['previousPieces'] = previousPieces;
		tableMap['authors'] = authors;
		tableMap['commentVersion'] = commentVersion;
	},

	/**
	 * Store column
	 * @param {string} tableDbName - table db name
	 * @param {Object} column - column object of pickup response
	 */
	storePickupColumn: function (tableDbName, column) {
		var columnName = column['columnName'];
		// init if not exists
		if (this.pickupStore[tableDbName]['columns'] === undefined) {
			this.pickupStore[tableDbName]['columns'] = {};
		}

		if (this.pickupStore[tableDbName]['columns'][columnName] === undefined) {
			this.pickupStore[tableDbName]['columns'][columnName] = {};
		}

		// return if not have properties
		var properties = column['properties'];
		if (properties.length == 0) {
			return;
		}

		// get database comment
		var columnMap = this.pickupStore[tableDbName]['columns'][columnName];
		var databaseComment = columnMap['databaseComment'];

		// setup properties to store
		var isConflict = properties.length > 1;
		var isDatabaseCommentConflict = false;
		var decomments = [];
		var previousPieces = [];
		var authors = [];
		var commentVersion = 0;
		var that = this;
		Array.prototype.forEach.call(properties, function (property) {
			if (property['databaseComment'] != null && databaseComment != null && !isDatabaseCommentConflict) {
				isDatabaseCommentConflict = DecommentUtil.escapeNewlineCharacter(databaseComment) != DecommentUtil.escapeNewlineCharacter(property['databaseComment']);
			}
			var decomment = {
				"body": property["decomment"],
				"pieceOwner": property["pieceOwner"],
				"pieceGitBranch": property["pieceGitBranch"]
			}
			decomments.push(decomment);
			if (property['pieceCode'] != null) {
				previousPieces.push(property['pieceCode']);
			}
			authors = authors.concat(property['authors']);
			if (commentVersion < property['commentVersion']) {
				commentVersion = property['commentVersion'];
			}
		});
		authors = authors.filter(function (x, i, self) {
			return self.indexOf(x) === i;
		});

		columnMap['isConflict'] = isConflict || isDatabaseCommentConflict;
		columnMap['isDatabaseCommentConflict'] = isDatabaseCommentConflict;
		columnMap['decomments'] = decomments;
		columnMap['previousPieces'] = previousPieces;
		columnMap['authors'] = authors;
		columnMap['commentVersion'] = commentVersion;
	},

	/**
	 * Get decomments
	 * @returns {Object} pickup
	 */
	getDecomments: function () {
		var pickup = this.pickupStore;
		var result = [];
		for (key in pickup) {
			result.push(new PickupTableProperty(key, pickup[key]));
		}
		return result;
	},

	/**
	 * Get table pickup
	 * @returns {Object} table pickup
	 */
	getTablePickup: function (tableName) {
		return new PickupTableProperty(tableName, this.pickupStore[tableName]);
	},

	/**
	 * Get column pickup
	 * @returns {Object} column pickup
	 */
	getColumnPickup: function (tableName, columnName) {
		var table = this.getTablePickup(tableName);
		if (!table) {
			return null;
		}
		return new PickupColumnProperty(tableName, columnName, table.columns[columnName])
	}
}

function PickupTableProperty(tableDbName, json) {
	this.tableDbName = tableDbName;
	this.inputAuthor = null; // use when decomment server mode.
	if (json) {
		this.databaseComment = json.databaseComment;
		this.isDatabaseCommentConflict = json.isDatabaseCommentConflict;
		this.decomments = json.decomments || [];
		this.previousPieces = json.previousPieces;
		this.authors = json.authors;
		this.pieceOwner = json.pieceOwner;
		this.commentVersion = json.commentVersion;
		this.columns = {};
		var columns = json.columns || {};
		for (var key in columns) {
			this.columns[key] = new PickupColumnProperty(tableDbName, key, columns[key]);
		}
	}
}

PickupTableProperty.prototype = {

	/**
	 * Reflect new comment to html
	 */
	reflectToHtml: function () {
		if (this.notChangeDisplayComment()) {
			return;
		}
		var author = this.authors.join(',');
		var comment = this.buildDisplayComment() + "\n<span>@author(" + author + ")</span>";
		var that = this;
		Array.prototype.forEach.call(this.selectTargetHtmlElements(), function (element) {
			element.innerHTML = comment;
			if (that.isConflict()) {
				element.className += " commentcellerror"
			}
		});
	},

	/**
	 * Convert to dialog title
	 * @returns {string} dialog title
	 */
	toDialogTitle: function () {
		return this.isConflict() ? this.tableDbName + " ... but now in CONFLICT!" : this.tableDbName;
	},

	/**
	 * Check change display comment;
	 */
	notChangeDisplayComment: function () {
		return this.decomments.length == 0 && !this.isConflict();
	},

	/**
	 * Build display comment to html
	 * @return {string} comment
	 */
	buildDisplayComment: function () {
		var displayComment = "";
		if (this.isDatabaseCommentConflict) {
            displayComment = this.getEscapedDatabaseComment();
			displayComment = displayComment + '\n(from database comment)\n\n=======\n\n';
		}

		var commentCount = this.decomments.length;
		for (key in this.decomments) {
			var decomment = this.decomments[key];
			displayComment += decomment.body
			if (this.isConflict() && decomment.pieceGitBranch) {
				displayComment += '\n=======' + decomment.pieceGitBranch + ' (' + decomment.pieceOwner + ')';
				if (key < commentCount - 1) {
					displayComment += '\n\n'; // show between comments
				}
			} else {
				if (key < commentCount - 1) {
					displayComment += '\n\n=======\n\n'; // show between comments
				}
			}
		}
		return displayComment;
	},

	/**
	 * Get escaped database comment
	 * @return {string} escaped database comment
	 */
	getEscapedDatabaseComment: function() {
		var escapedComment = "";
		escapedComment = DecommentUtil.escapeNewlineCharacter(escapedComment);
		return escapedComment;
	},

	/**
	 * Select target html element
	 * @return {Array} html elements
	 */
	selectTargetHtmlElements: function () {
		var className = this.tableDbName + "_" + "comment";
		var tableElements = document.getElementsByClassName(className);
		var result = [];
		Array.prototype.forEach.call(tableElements, function (element) {
			var target = element.querySelector('pre')
			if (target) {
				result.push(target);
			}
		});
		return result;
	},

	/**
	 * Get display html comment
	 * @return {string} display html comment
	 */
	getDisplayHtmlComment: function() {
		var child = this.selectTargetHtmlElements()[0].childNodes[0];
		if (child != null && child.nodeName === "#text") {
			return child.nodeValue.trim();
		}
		return ""
	},

	/**
	 * Check conflict
	 * @return {boolean} true: conflict, false: not
	 */
	isConflict: function () {
		return this.decomments.length > 1 || this.isDatabaseCommentConflict;
	},

	/**
	 * Convert to request params
	 * @return {Object} request params
	 */
	toRequestParams: function () {
		return {
			'tableName': this.tableDbName,
			'columnName': null,
			'targetType': 'TABLE',
			'decomment': (this.decomments[0] || {}).body,
			'databaseComment': DecommentUtil.escapeNewlineCharacter(this.databaseComment),
			'commentVersion': this.commentVersion || 0,
			'inputAuthor': this.inputAuthor,
			'authors': this.authors || [],
			'previousPieces': this.previousPieces || []
		};
	}
};

function PickupColumnProperty(tableDbName, columnName, json) {
	this.tableDbName = tableDbName;
	this.columnName = columnName;
	this.inputAuthor = null; // use when decomment server mode.
	if (json) {
		this.databaseComment = json['databaseComment'];
		this.isDatabaseCommentConflict = json['isDatabaseCommentConflict'];
		this.decomments = json['decomments'] || [];
		this.previousPieces = json['previousPieces'];
		this.authors = json['authors'];
		this.pieceOwner = json['pieceOwner'];
		this.commentVersion = json['commentVersion'];
		this.previousWholeComment = json['previousWholeComment'];
	}
}

PickupColumnProperty.prototype = {

	/**
	 * Reflect new comment to html
	 */
	reflectToHtml: function () {
		if (this.notChangeDisplayComment()) {
			return;
		}
		var author = this.authors.join(',');
		var comment = this.buildDisplayComment() + "\n<span>@author(" + author + ")</span>";
		var element = this.selectTargetHtmlElement();
		if (!element) {
			return
		}
		element.innerHTML = comment;
		if (this.isConflict()) {
			element.className += " commentcellerror"
		}
	},

	/**
	 * Convert to dialog title
	 * @returns {string} dialog title
	 */
	toDialogTitle: function () {
		var name = this.tableDbName + "." + this.columnName;
		return this.isConflict() ? name + " ... but now in CONFLICT!" : name;
	},

	/**
	 * Check change display comment;
	 */
	notChangeDisplayComment: function () {
		return this.decomments.length == 0 && !this.isConflict();
	},

	/**
	 * Build display comment to html
	 * @return {string} comment
	 */
	buildDisplayComment: function () {
		var displayComment = "";
		if (this.isDatabaseCommentConflict) {
			displayComment = this.getEscapedDatabaseComment();
			displayComment = displayComment + '\n(from database comment)\n\n=======\n\n';
		}

		var commentCount = this.decomments.length;
		for (key in this.decomments) {
			var decomment = this.decomments[key];
			displayComment += decomment.body
			if (this.isConflict() && decomment.pieceGitBranch) {
				displayComment += '\n=======' + decomment.pieceGitBranch + ' (' + decomment.pieceOwner + ')';
				if (key < commentCount - 1) {
					displayComment += '\n\n'; // show between comments
				}
			} else {
				if (key < commentCount - 1) {
					displayComment += '\n\n=======\n\n'; // show between comments
				}
			}
		}
		return displayComment;
	},

	/**
	 * Get escaped database comment
	 * @return {string} escaped database comment
	 */
	getEscapedDatabaseComment: function() {
		var escapedComment = "";
		escapedComment = DecommentUtil.escapeNewlineCharacter(escapedComment);
		return escapedComment;
	},

	/**
	 * Select target html element
	 * @return {Object} html element
	 */
	selectTargetHtmlElement: function () {
		var columnId = this.tableDbName + "_" + this.columnName;
		columnId = columnId.toLowerCase();
		var columnElement = document.getElementById(columnId);
		if (columnElement === null) {
			return null;
		}
		return columnElement.parentElement.querySelector('.commentcell').querySelector('pre')
	},

	/**
	 * Get display html comment
	 * @return {string} display html comment
	 */
	getDisplayHtmlComment: function() {
		var child = this.selectTargetHtmlElement().childNodes[0];
		if (child != null && child.nodeName === "#text") {
			return child.nodeValue.trim();
		}
		return ""
	},

	/**
	 * Check conflict
	 * @return {boolean} true: conflict, false: not
	 */
	isConflict: function () {
		return this.decomments.length > 1 || this.isDatabaseCommentConflict;
	},

	/**
	 * Convert to request params
	 * @return {Object} request params
	 */
	toRequestParams: function () {
		return {
			'tableName': this.tableDbName,
			'columnName': this.columnName,
			'targetType': 'COLUMN',
			'decomment': (this.decomments[0] || {}).body,
			'databaseComment': DecommentUtil.escapeNewlineCharacter(this.databaseComment),
			'commentVersion': this.commentVersion || 0,
			'inputAuthor': this.inputAuthor,
			'authors': this.authors || [],
			'previousPieces': this.previousPieces || []
		};
	}
};

/**
 * @author deco
 * @author cabos
 */
function Decomment() {
	this.storeClient = new StoreClient()
}
Decomment.prototype = {

	/**
	 * init
	 */
	init: function () {
		if (document.getElementById("intro_opening") !== null) {
			this.fetchVirtualPickup();
			this.setupKeyDownEvent();
			this.showUserNameInputIfNeed();
		} else {
			this.reflectEmbeddedPickup();
		}
	},

	/**
	 * Fetch virtual pickup from server
	 */
	fetchVirtualPickup: function () {
		var that = this;
		new ApiClient().fetchDecomment(function(response) {
			var decomment = JSON.parse(response);
			that.reflectPickup(decomment);
			that.setupSaveDecomment();
		})
	},

	/**
	 * Show user name input when decomment server mode.
	 */
	showUserNameInputIfNeed: function() {
		if (DecommentUtil.isDecommentServer() && this.isUserNameEmpty()) {
			document.querySelector('#decomment-user-input').style.display = 'block';
		}
	},

	hideUserNameInput: function() {
		document.querySelector('#decomment-user-input').style.display = 'none';
	},

	/**
	 * Reflect embedded pick
	 */
	reflectEmbeddedPickup: function () {
		this.reflectPickup(this.storeClient.embeddedPickup);
	},

	/**
	 * Reflect pickup
	 * @param {Object} decomment - Decomment object
	 */
	reflectPickup: function (decomment) {
		var that = this;
		this.storeClient.unmappedTableArea.clear();
		this.storeClient.unmappedColumnArea.clear();
		this.storeClient.storePickup(decomment);
		var pickup = this.storeClient.getDecomments()
		Array.prototype.forEach.call(pickup, function (table) {
			table.reflectToHtml();
			for (var key in table.columns) {
				var column = table.columns[key]
				column.reflectToHtml();
			}
		});
		this.storeClient.unmappedTableArea.reflect();
		this.storeClient.unmappedColumnArea.reflect();
	},

	/**
	 * Setup save decomment event
	 * @param {string} table - Table name
	 */
	setupSaveDecomment: function(schemeName) {
		this.setupSaveTableComment();
		this.setupSaveColumnComment();
	},

	/**
	 * Setup save table comment event
	 */
	setupSaveTableComment: function() {
		var that = this;
		var tableList = document.getElementById('table-list-body').querySelectorAll('tr');
		Array.prototype.forEach.call(tableList, function (table) {
			var tableName = table.querySelector('.namecell').getAttribute('data-name');
			var commentElement = table.querySelector('.commentcell');
			that.setupSaveTableClickEvent(tableName, commentElement);
		});
		var commentTables = document.querySelectorAll('.tablecomment')
		Array.prototype.forEach.call(commentTables, function (tableElement) {
			var tableName = tableElement.getAttribute('data-name');
			that.setupSaveTableClickEvent(tableName, tableElement);
		});
	},

	/**
	 * Setup save table comment click event to html
	 * @param {string} tableName - Table name
	 * @param {Object} commentElement - Comment element
	 */
	setupSaveTableClickEvent: function(tableName, commentElement) {
		var tableProperty = this.storeClient.getTablePickup(tableName) || new PickupTableProperty(tableName, null)
		commentElement.onclick = this.createSaveDecommentFunction(tableProperty);
	},

	/**
	 * Setup save column comment event
	 */
	setupSaveColumnComment: function () {
		var tables = document.getElementsByClassName('tablecontent');
		var that = this;
		Array.prototype.forEach.call(tables, function (table) {
			var columns = table.getElementsByTagName('tr');
			Array.prototype.forEach.call(columns, function (column, index) {
				if (index === 0) { // because table header
					return
				}

				var commentElement = column.querySelector('.commentcell');
				var tableName = that.getTableNameFromElement(table);
				var columnName = column.querySelector('.columnnamecell').innerText.trim();
				var columnProperty = that.storeClient.getColumnPickup(tableName, columnName) || new PickupTableProperty(tableName, columnName)
				commentElement.onclick = that.createSaveDecommentFunction(columnProperty);
			});
		});
	},

	/**
 	 * Create save decomment function
	 * param {object} commentProperty - Comment property
	 * returns {function} Save decomment function
	 */
	createSaveDecommentFunction: function (commentProperty) {
		var that = this;
 		return function () {
	 		var modalElement = document.getElementById("decomment-modal");
			modalElement.style.display = "block";

			document.getElementById("decomment-modal-column-info").innerText = commentProperty.toDialogTitle();

			var inputElement = document.getElementById("decomment-input");
			var previousWholeComment = commentProperty.getDisplayHtmlComment();
			inputElement.value = previousWholeComment;
			inputElement.focus();

			document.getElementById("decomment-close").onclick = function () {
				modalElement.style.display = "none";
			};

			document.getElementById("decomment-ok").onclick = function () {
				var decomment = inputElement.value;
				if (DecommentUtil.isDecommentServer() && that.isUserNameEmpty()) {
					alert('Input your user name.');
					return;
				}
				if (that.isStillConflicting(decomment)) {
					alert('Still conflicting. please resolve.')
					return;
				}
				if (!that.isCommentChanged(previousWholeComment, decomment)) {
					modalElement.style.display = "none";
					return;
				}
				decomment = DecommentUtil.escapeInputText(decomment);
				decomment = DecommentUtil.deleteUnnecessaryWhitespace(decomment);
				commentProperty.decomments = [{'body': decomment}]
				commentProperty.inputAuthor = that.getUserName();
				var params = commentProperty.toRequestParams()
				new ApiClient().saveDecomment(params, function () {
					that.fetchVirtualPickup();
					that.hideUserNameInput();
				});
				modalElement.style.display = "none";
			};

			window.onclick = function (event) {
				if (event.target == modalElement) {
					modalElement.style.display = "none";
				}
			};
		};
	},

	/**
	 * Get user name. and save to cookie if not saved.
	 */
	getUserName : function() {
		var savedUserName = this.getCookie('decomment-user-name');
		if (savedUserName) {
			return savedUserName;
		}
		var inputUserName = document.querySelector('#decomment-user-name').value;
		if (inputUserName && inputUserName.length > 0) {
			document.cookie = "decomment-user-name=" + inputUserName + ";expires=2147483647";
		}
		return inputUserName;
	},

	/**
	 * Check user name is inputed.
	 */
	isUserNameEmpty : function() {
		return this.getCookie('decomment-user-name') === null && this.getUserName().length === 0;
	},

	/**
	 * Get cookie from key
	 */
	getCookie: function (key){
		var cookies = document.cookie.split('; ');
		for (var i = 0; i < cookies.length; i++){
			var c = cookies[i].split('=');
			if(c[0] === key){
				return c[1];
			}
		}
		return null;
	},

	/**
	 * Setup key down event
	 */
	setupKeyDownEvent : function() {
		document.onkeydown = function (e) {
			// ESC
			if(e.keyCode == 27){
				var modalElement = document.getElementById("decomment-modal");
				modalElement.style.display = "none";
			}
		}
	},

	/**
	 * Get table name
	 * @param {Object} table - Table element
	 * @returns {string} table name
	 */
	getTableNameFromElement: function (table) {
		var previousElement = table.previousElementSibling;
		return previousElement.value;
	},

	/**
	 * Check still conflicting
	 * @param {string} decomment - decomment
	 * @returns {Boolean} is still conflicting
	 */
	isStillConflicting: function(decomment) {
		return decomment.includes('=======');
	},

	/**
	 * Check new decomment and previous comment is different
	 * @param {string} tableName - Table name
	 * @param {string} columnName - Column name
	 * @param {string} decomment - decomment
	 * @returns {Boolean} is changed
	 */
	isCommentChanged: function (previousWholeComment, decomment) {
		if (previousWholeComment) {
			return previousWholeComment.trim() !== decomment.trim();
		}
		return decomment.trim().length != 0;
	}
};

/**
 * @author cabos
 */
function UnmappedTableRow () {
}
UnmappedTableRow.prototype = {

	/**
	 * Initialize unmapped table row
	 * @param {number} row number
	 * @param {object} table
	 */
	init: function (rowNum, table) {
		this.rowNum = rowNum;
		this.tableName = table.tableName;
		this.mappedTableNameList = Array.prototype.map.call(table.mappings, function (mapping) {
			return mapping.newTableName;
		});
		this.previousMappingList = Array.prototype.map.call(table.mappings, function (mapping) {
			return mapping.mappingCode;
		});
		this.authorList = Array.prototype.map.call(table.mappings, function (mapping) {
			return mapping.mappingOwner;
		});
	},

	/**
	 * Convert unmapped table row to string
	 * @returns {string} Unmapped table row
	 */
	toDisplayHtmlString: function () {
		return '<tr id="unmapped-table-row-' + this.tableName + '">'
		+ '<td class="rownumcell">' + this.rowNum + '</td>'
		+ '<td class="namecell">' + this.tableName + '</td>'
		+ '<td class="namecell tableconflictcell">' + this.toConflictDisplayHtmlString() + '</td>'
		+ '<td class="tableselectorcell">' + '</td>'
		+ '</tr>';
	},

	toConflictDisplayHtmlString: function() {
		return Array.prototype.reduce.call(this.mappedTableNameList, function (currentStrs, name) {
			if (currentStrs.length === 0) {
				return name;
			}
			return currentStrs + "<br>" + name ;
		}, '');
	},

	isTableNameConflict: function() {
		return this.previousMappingList.length >= 2;
	}
}

/**
 * @author cabos
 */
function UnmappedTableArea() {
	this.rows = [];
}
UnmappedTableArea.prototype = {

	/**
	 * Push unmapped table
	 */
	push: function (table) {
		var row = new UnmappedTableRow();
		row.init(this.rows.length + 1, table);
		this.rows.push(row);
	},

	/**
	 * Activate unmapped table field
	 */
	activate: function () {
		if (document.getElementById("intro_opening") === null) {
			return;
		}

		var unmappedElements = document.getElementById('unmapped-tables');
		unmappedElements.style.display = 'inline';
		var that = this;
		document.getElementById('table-mapping-submit-button').onclick = function() {
			that.postMappingTable();
		};
	},

	/**
	 * Clear unmapped table field
	 */
	clear: function () {
		var tbody = this.getTableBodyElement();
		tbody.innerHTML = '';
		this.rows = [];

		var unmappedElements = document.getElementById('unmapped-tables');
		unmappedElements.style.display = 'none';
	},

	/**
	 * Reflect unmapped table body
	 */
	reflect: function () {
		if (this.rows.length === 0) {
			return;
		}

		this.activate();

		var tbody = this.getTableBodyElement();
		tbody.innerHTML += this.toDisplayHtmlString();
		this.showTableSelector();

		if (!this.isTableNameConflict()) {
			document.querySelector('#unmapped-table-head th.conflictcell').style.display = 'none';
			Array.prototype.forEach.call(document.getElementsByClassName('tableconflictcell'), function (cell) {
				cell.style.display = 'none'
			});
		}
	},

	isTableNameConflict: function () {
		return Array.prototype.some.call(this.rows, function (row) {
			return row.isTableNameConflict();
		});
	},

	/**
	 * Show table selector
	 *	<select>
	 *		<option>TABLE_NAME1</option>
	 *		<option>TABLE_NAME2</option>
	 *		<option>TABLE_NAME3</option>
	 *		...
	 *	</select>
	 * @returns {string} show table selector
	 */
	showTableSelector: function () {
		var tableSelector = this.createTableSelector();
		var tableSelectorCellList = document.getElementsByClassName('tableselectorcell');
		Array.prototype.forEach.call(tableSelectorCellList, function (cell) {
			cell.innerHTML = tableSelector;
		});
	},

	/**
	 * Create select list of table
	 * @returns {string}
	 */
	createTableSelector: function () {
		var tableNameList = this.getTableNameList();
		var options = Array.prototype.reduce.call(tableNameList, function (currentOptions, name) {
			return currentOptions + '<option>' + name + '</option>';
		}, '');
		return '<select>' + '<option>-</option>' + options + '</select>'
	},

	/**
	 * Get data list
	 * @returns {array} table name list
	 */
	getTableNameList: function () {
		var trs = document.getElementById('table-list-body').getElementsByTagName('tr');
		var tableList = [];
		for (var i = 0, max = trs.length; i < max; i++) {
			tableList.push(trs[i].getElementsByTagName('td')[NAME_INDEX].innerText);
		}
		return tableList;
	},

	/**
	 * Get Unmapped table body element
	 * @returns {object} Unmapped table body element
	 */
	getTableBodyElement: function () {
		return document.getElementById('unmapped-table-body');
	},

	/**
	 * Convert to string
	 * 	<tr>
	 *		<td class="rownumcell">1</td>
	 *		<td class="namecell">OLD_TABLE_NAME1</td>
	 *		<td class="columnselectorcell">
	 *		</td>
	 *	</tr>
	 * 	<tr>
	 *		<td class="rownumcell">1</td>
	 *		<td class="namecell">OLD_TABLE_NAME2</td>
	 *		<td class="columnselectorcell">
	 *		</td>
	 *	</tr>
	 *  ....
	 * @returns {string} Unmapped table rows
	 */
	toDisplayHtmlString: function () {
		return Array.prototype.reduce.call(this.rows, function (currentRows, row) {
			return currentRows + row.toDisplayHtmlString();
		}, '');
	},

	postMappingTable: function() {
		var mappings = Array.prototype.map.call(this.rows, function (row) {
			var newTableName = document.getElementById('unmapped-table-row-' + row.tableName).children[3].children[0].value;
			return {
				oldTableName: row.tableName,
				newTableName: newTableName,
				targetType: 'TABLE',
				authors: row.authorList,
				previousMappings : row.previousMappingList
			};
		});

		mappings = Array.prototype.filter.call(mappings, function(mapping) {
			return mapping.newTableName !== '-';
		});

		if (mappings.length === 0) {
			return;
		}

		var params = { mappings: mappings };
		var successCallback = function() {
			window.location.reload();
		};
		new ApiClient().postMapping(params, successCallback);
	},
}

/**
 * @author cabos
 */
function UnmappedColumnRow () {
}
UnmappedColumnRow.prototype = {

	/**
	 * Initialize unmapped column row
	 * @param {number} Row number
	 * @param {string} Old table name
	 */
	init: function (rowNum, table, column) {
		this.rowNum = rowNum;
		this.tableName = table.tableName;
		this.oldColumnName = column.columnName;

		this.mappedColumnNameList = Array.prototype.map.call(column.mappings, function (mapping) {
			return mapping.newTableName + '.' + mapping.newColumnName;
		});
		this.previousMappingList = Array.prototype.map.call(column.mappings, function (mapping) {
			return mapping.mappingCode;
		});
		this.authorList = Array.prototype.map.call(column.mappings, function (mapping) {
			return mapping.mappingOwner;
		});
	},

	/**
	 * Convert unmapped column row to string
	 * @returns {string} Unmapped column row
	 */
	toDisplayHtmlString: function () {
		return '<tr id="unmapped-column-row-' + this.oldColumnName + '">'
		+ '<td class="rownumcell">' + this.rowNum + '</td>'
		+ '<td class="namecell">' + this.tableName + '</td>'
		+ '<td class="namecell">' + this.oldColumnName + '</td>'
		+ '<td class="namecell columnconflictcell">' + this.toConflictDisplayHtmlString() + '</td>'
		+ '<td id="columnselectorcell-' + this.tableName + '-' + this.oldColumnName + '">' + '</td>'
		+ '</tr>';
	},

	toConflictDisplayHtmlString: function() {
		return Array.prototype.reduce.call(this.mappedColumnNameList, function (currentStrs, name) {
			if (currentStrs.length === 0) {
				return name;
			}
			return currentStrs + "<br>" + name ;
		}, '');
	},

	isColumnNameConflict: function() {
		return this.previousMappingList.length >= 2;
	}
}

/**
 * @author cabos
 */
function UnmappedColumnArea() {
	this.rows = [];
}
UnmappedColumnArea.prototype = {

	/**
	 * Push unmapped column
	 */
	push: function (table, column) {
		var row = new UnmappedColumnRow();
		row.init(this.rows.length + 1, table, column);
		this.rows.push(row);
	},

	/**
	 * Activate unmapped column field
	 */
	activate: function () {
		if (document.getElementById("intro_opening") === null) {
			return;
		}

		var unmappedElements = document.getElementById('unmapped-columns');
		unmappedElements.style.display = 'inline';
		var that = this;
		document.getElementById('column-mapping-submit-button').onclick = function() {
			that.postMappingColumn();
		};
	},

	/**
	 * Clear unmapped column field
	 */
	clear: function () {
		var tbody = this.getColumnBodyElement();
		this.rows = [];
		tbody.innerHTML = '';

		var unmappedElements = document.getElementById('unmapped-columns');
		unmappedElements.style.display = 'none';
	},

	/**
	 * Reflect unmapped column field
	 */
	reflect: function () {
		if (this.rows.length === 0) {
			return;
		}

		this.activate();

		var tbody = this.getColumnBodyElement();
		var that = this;
		Array.prototype.forEach.call(this.rows, function (row) {
			tbody.innerHTML += row.toDisplayHtmlString();
			that.displayColumnSelector(row.tableName, row.oldColumnName);
		});

		if (!this.isColumnNameConflict()) {
			document.querySelector('#unmapped-column-head th.conflictcell').style.display = 'none';
			Array.prototype.forEach.call(document.getElementsByClassName('columnconflictcell'), function (cell) {
				cell.style.display = 'none'
			});
		}
	},

	isColumnNameConflict: function () {
		return Array.prototype.some.call(this.rows, function (row) {
			return row.isColumnNameConflict();
		});
	},

	/**
	 * Display column selector
	 */
	displayColumnSelector: function (tableName, oldColumnName) {
		var columnSelector = this.createColumnSelector(tableName);
		var columnSelectorCell = document.getElementById('columnselectorcell-' + tableName + '-' + oldColumnName);
		columnSelectorCell.innerHTML = columnSelector;
	},

	/**
	 * Create select list of column
	 *	<select>
	 *		<option>COLUMN_NAME1</option>
	 *		<option>COLUMN_NAME2</option>
	 *		<option>COLUMN_NAME3</option>
	 *		...
	 *	</select>
	 * @returns {string} Column selector
	 */
	createColumnSelector: function (tableName) {
		var columnNameList = this.getColumnNameList(tableName);
		var options = Array.prototype.reduce.call(columnNameList, function (currentOptions, name) {
			return currentOptions + '<option>' + name + '</option>';
		}, '');
		return '<select>' + '<option>-</option>' + options + '</select>'
	},

	/**
	 * Get column name list by table name
	 * @returns {array} column name list
	 */
	getColumnNameList: function (tableName) {
		var trs = document.getElementById(tableName.toLowerCase() + '-body').getElementsByTagName('tr');
		var columnList = [];
		for (var i = 0, max = trs.length; i < max; i++) {
			// TODO check that column name column num is 6
			columnList.push(trs[i].getElementsByTagName('td')[7].innerText);
		}
		return columnList;
	},

	/**
	 * Get Unmapped column body element
	 * @returns {object} Unmapped column body element
	 */
	getColumnBodyElement: function () {
		return document.getElementById('unmapped-column-body');
	},

	/**
	 * Convert to string
	 * 	<tr>
	 *		<td class="rownumcell">1</td>
	 *		<td class="namecell">TABLE_NAME1</td>
	 *		<td class="namecell">OLD_COLUMN_NAME1</td>
	 *		<td class="columnselectorcell">
	 *		</td>
	 *	</tr>
	 * 	<tr>
	 *		<td class="rownumcell">1</td>
	 *		<td class="namecell">TABLE_NAME2</td>
	 *		<td class="namecell">OLD_COLUMN_NAME2</td>
	 *		<td class="columnselectorcell">
	 *		</td>
	 *	</tr>
	 *	....
	 *	@returns {string} Unmapped column rows
	 */
	toDisplayHtmlString: function () {
		return Array.prototype.reduce.call(this.rows, function (currentRows, row) {
			return currentRows + row.toDisplayHtmlString();
		}, '');
	},

	postMappingColumn: function() {
		var mappings = Array.prototype.map.call(this.rows, function (row) {
			var tableName = row.tableName;
			var oldColumnName = row.oldColumnName;
			var selectorCellId = 'columnselectorcell-' + tableName + '-' + oldColumnName;
			var newColumnName = document.getElementById(selectorCellId).children[0].value;
			return {
				oldTableName: tableName,
				oldColumnName: oldColumnName,
				newTableName: tableName,
				newColumnName: newColumnName,
				targetType: 'COLUMN',
				authors: row.authorList,
				previousMappings : row.previousMappingList
			};
		});

		mappings = Array.prototype.filter.call(mappings, function(mapping) {
			return mapping.newColumnName !== '-';
		});

		if (mappings.length === 0) {
			return;
		}

		var params = { mappings: mappings };
		var successCallback = function() {
			window.location.reload();
		};
		new ApiClient().postMapping(params, successCallback);
	}
}
new Decomment().init();
</script>
</body>
</html>
